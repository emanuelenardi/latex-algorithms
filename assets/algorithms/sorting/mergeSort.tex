%&../preamble

% arara: pdflatex: { synctex: no }
% arara: latexmk: { clean: partial }
\ifstandalone
\begin{document}
\begin{algorithm}[H]
\fi

\tcp{ordina i sottovettori}
\prototype{\mergeSort{\Item{} A, \Int primo, \Int ultimo}}{

	\BlankLine
	\If(\Comment*[h]{devono esistere almeno due elementi}){\(primo < ultimo\)}{
		\Int \(mezzo \Assign \floor{\frac{primo + ultimo}{2}}\)\;
		\mergeSort{A, primo, mezzo}\;
		\mergeSort{A, mezzo+1, ultimo}\;
		\merge{A, primo, ultimo, mezzo} \Comment*[l]{unisce le soluzioni}\;
	}
}

\BlankLine
\tcp{effettua l'ordinamento dei sotto-vettori}
\prototype{\merge{\Item A, \Int primo, \Int ultimo, \Int mezzo}}{
	\Int i, j, k, h\;

	\BlankLine
	\tcp{inizializzo i puntatori}
	\(i \Assign primo\)
	\(j \Assign mezzo\)
	\(k \Assign primo\)\;
	\tcp{k: indica la prossima posizione di scrittura}

	\BlankLine
	\tcp{fintanto che entravi}
	\While{\(i \leqslant mezzo\) \And \(j \leqslant ultimo\)}{

		\BlankLine
		\eIf{\(A[i] \leqslant A[j]\)}{
			\tcp{l'elemento Ã¨ gia ordinato}
			\(B[k] \Assign A[i]\)\;
			\Increment{i}\;
		}{
			\(B[k] \Assign A[j]\)\;
			\Increment{j}\;
		}

		\BlankLine
		\tcp{\emph{in entrambi i casi} ho inserito un valore}
		\Increment{k}
	}

	\BlankLine
	\tcp{se uno dei due vettori finisce ricopio la parte ordinata alla fine del vettore d'appoggio}
	\(j \Assign ultimo\)\;
	\From{\(h \Assign mezzo\) \DownTo \(i\)}{
		\(A[j] \Assign A[h]\)\;
		\Decrement{j}\;
	}

	\BlankLine
	\tcp{ricopio il vettore d'appoggio del vettore originale}
	\From{\(j \Assign primo\) \DownTo \(k-1\)}{
		\(A[j] \Assign B[j]\)\;
	}
}
%
% \BlankLine
% \BlankLine
% Equazione di ricorrenza:
% \[
% 	T =
% 	\begin{dcases}
% 		\Theta(1) & n = 1\\
% 		\T*{\nicefrac{n}{2}} + \T*{\nicefrac{n}{2}} + \Theta(n) & n > 1 \\
% 	\end{dcases}
% 	=
% 	\begin{dcases}
% 		c & n = 1\\
% 		2\T{\nicefrac{n}{2}} + dn & n > 1\\
% 	\end{dcases}
% \]
%
% \BlankLine
% Analisi per livelli:
% \[
% \Omicron \left( \sum_{i=0}^{k} \Ccancel{2^i} \frac{n}{\Ccancel{2^i}} \right) = \Omicron \left( \sum_{i=0}^{k} n \right) = \Omicron(k \cdot n) = \Omicron(n \log n)
% \]
% %
% Teorema dell'esperto:
%
% \begin{minipage}[t]{.4\linewidth}
% \begin{align*}
% 		\alpha &= \log_2 2 = 1 \\
% 		\beta  &= 1 \\
% 		\alpha &= \beta \\
% \end{align*}
% \end{minipage}
% \begin{minipage}[t]{.4\linewidth}
% \begin{align*}
% 	T &= \Omicron(n^{\alpha} \log n) \\
% 	  &= \Omicron(n \log n) \\
% \end{align*}
% \end{minipage}

\ifstandalone
\end{algorithm}
\end{document}
\fi
