\documentclass[varwidth=6in]{standalone}
\usepackage{../preamble}

% \documentclass[varwidth=6in]{standalone}
% \usepackage{../preamble}

% arara: pdflatex: { synctex: no }
% arara: latexmk: { clean: partial }
\begin{document}

\ifstandalone
\NoCaptionOfAlgo
\algorithmstyle{ruled}
\begin{algorithm}[H]
\caption{Implementazione \textsc{Dictionary} con \textsc{ABR}}
\fi

\BlankLine
\tcp{RIMOZIONE DI UN NODO}
\prototype{\Tree \removeNode{\Tree \(T\), \Item \(k\)}}{
	% NOTE viene dichiarato ma non viene utilizzato
	% \Tree \(t\)\;

	\BlankLine
	\tcp{individuo il nodo da rimuovere}
	\Tree \(u \Assign\) \lookupNode{\(T, k\)}\;

	\BlankLine
	\tcp{se il nodo da rimuovere Ã¨ presente nell'albero\dots}
	\If{\(u \neq \Nil\)}{
		\lnl{case:primo-caso}%
		\tcp{\dots e non ha figli}
		\uIf{\(u.\varLeft \Equal \Nil\) \And \(u.\varRight \Equal \Nil\)}{
		% \uIf(\tcp*[h]{nessun figlio}){\(u.\varLeft \Equal \Nil\) \And \(u.\varRight \Equal \Nil\)}{
			\If(\tcp*[h]{se esiste il padre}){\(u.\varParent \Neq \Nil\)}{
				\shortcut{\(u.\varParent, \Nil, k\)} \Comment*[l]{rimuovo il puntatore al figlio}
			}

			\BlankLine
			\tcp{rimuovo direttamente il nodo}
			\delete \(u\)\;
		}\lnlset{terzo-caso}{3}%
		\tcp{\dots ed ha due figli}
		\uIf{\(u.\varLeft \neq \Nil\) \And \(u.\varRight \neq \Nil\)}{
		% \uIf(\tcp*[h]{due figli}){\(u.\varLeft \neq \Nil\) \And \(u.\varRight \neq \Nil\)}{

			\BlankLine
			\Tree \(s =\) \succNode \Comment*[l]{individuo il successore}

			\BlankLine
			\shortcut{\(s.\varParent, s.\varRight, s.\varKey\)} \Comment*[l]{collego il sottoalbero destro}

			\BlankLine
			\tcp{copio il successore}
			\tcp{nella posizione del nodo rimosso}
			\(u.\varKey \Assign s.\varKey\)\;
			\(u.\varValue \Assign s.\varValue\)\;

			\BlankLine
			\tcp{rimuovo il successore}
			\delete \(s\)\;
		}\lnl{case:secondo-caso}%
		\tcp{\dots ed ha un solo figlio (sinistro)}
		\uIf{\(u.\varLeft \neq \Nil\) \And \(u.\varRight \Equal \Nil\)}{
		% \uIf(\tcp*[h]{solo un figlio (sinistro)}){\(u.\varLeft \neq \Nil\) \And \(u.\varRight \Equal \Nil\)}{

			\BlankLine
			\shortcut{\(u.\varParent, u.\varLeft, k\)} \Comment*[l]{collega il figlio al padre}

			\BlankLine
			\If(\tcp*[h]{se il padre non esiste}){\(u.\varParent \Equal \Nil\)}{
				\(T \Equal u.\varRight\) \Comment*[l]{il figlio diventa la radice}
			}
		}
		\tcp{\dots ed ha un solo figlio (sinistro)}
		\Altrimenti{
		% \Altrimenti(\tcp*[h]{solo un figlio (destro)}){

			\BlankLine
			\shortcut{\(u.\varParent, u.\varRight, k\)} \Comment*[l]{collega il figlio al padre}

			\BlankLine
			\If(\tcp*[h]{se il padre non esiste}){\(u.\varParent \Equal \Nil\)}{
				\(T \Equal u.\varRight\) \Comment*[l]{il figlio diventa la radice}
			}
		}
	}

	\BlankLine
	\tcp{restituisco la radice}
	\Return \(T\)\;
}

\ifstandalone
% \end{multicols}
\end{algorithm}
\algorithmstyle{tworuled}
\RestoreCaptionOfAlgo
\fi

\end{document}
