%&../preamble

% arara: pdflatex: { synctex: no }
% arara: latexmk: { clean: partial }
\ifstandalone
\begin{document}
\begin{algorithm}[H]
\fi

\BlankLine
% \tcp{bilanciamento di un \textsc{Red-Black Tree} in seguito alla rimozione di un nodo \RED}
\prototype{\treeFixDelete{\Tree t}}{

	\BlankLine
	\(t.\varColor \Assign \RED\) \Comment*[l]{coloro il nodo da inserire di rosso}

	\BlankLine
	\While{(\(t \Neq T\)) \And (\(t.\varColor \Equal \BLACK\))}{

		\BlankLine
		\Tree \(p \Assign t.\varParent\) \Comment*[r]{riferimento al padre}

		\BlankLine
		\eIf{\(t \Equal p.\varLeft\)}{

			\BlankLine
			\Tree \(f \Assign p.\varRight\) \Comment*[r]{riferimento al fratello}
			\Tree \(ns \Assign f.\varLeft\) \Comment*[r]{riferimento al nipote sinistro}
			\Tree \(nd \Assign f.\varRight\) \Comment*[r]{riferimento al nipote destro}

			\BlankLine
			\lnl{caso1}%
			\eIf{\(f.\varColor \Equal \RED\)}{
				\(p.\varColor \Assign \RED\)\;
				\(f.\varColor \Assign \BLACK\)\;
				\leftRotation{\(p\)}\;
				\tcp{t viene lasciato inalterato, quindi si ricade nei casi 2, 3, 4}
				\BlankLine

			}{

				\lnl{caso2}%
				\uIf{\(ns.\varColor \Equal nd.\varColor \Equal \BLACK\)}{
					\(f.\varColor \Equal \RED\)\;
					\(t \Assign p\) \Comment*[l]{passo il problema al padre}
					\BlankLine

				}%
				\lnl{caso3}%
				\uElseIf{(\(ns.\varColor \Equal \RED\)) \And (\(nd.\varColor \Equal \BLACK\))}{
					\(ns.\varColor \Assign \BLACK\)\;
					\(f.\varColor \Assign  \RED\)\;
					\rightRotation{\(f\)}\;
					\tcp{t viene lasciato inalterato, quindi si ricade nel caso 4}
					\BlankLine

				}%
				\lnl{caso4}%
				\ElseIf{\(nd.\varColor \Equal \RED\)}{
					\(f.\varColor \Equal p.\varColor\)\;
					\(p.\varColor \Assign \BLACK\)\;
					\(nd.\varColor \Assign \BLACK\)\;
					\leftRotation{\(p\)}\;
					\(t \Assign T\)\;
				}
			}
		}{
			\tcp{casi speculari}
		}
	}
}

\ifstandalone
\end{algorithm}
\end{document}
\fi
